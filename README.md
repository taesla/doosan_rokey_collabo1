# ğŸ¤– Doosan ë¬¼ë¥˜ ë¶„ë¥˜ ë¡œë´‡ ì‹œìŠ¤í…œ

[![ROS2](https://img.shields.io/badge/ROS2-Humble-blue)](https://docs.ros.org/en/humble/)
[![Python](https://img.shields.io/badge/Python-3.10+-green)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](LICENSE)

Doosan M0609 ë¡œë´‡ì„ ì‚¬ìš©í•œ **ë¬¼ë¥˜ ìë™ ë¶„ë¥˜ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤.  
**Flask + SocketIO** ê¸°ë°˜ ì›¹ UIì™€ **ROS2 Humble**ì„ í†µí•©í•˜ì—¬ ì‹¤ì‹œê°„ ë¡œë´‡ ì œì–´ ë° ëª¨ë‹ˆí„°ë§ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸ“– Documentation

| ë¬¸ì„œ | ì„¤ëª… |
|------|------|
| ğŸ¯ [Interactive Slides](https://taesla.github.io/doosan_rokey_collabo1/) | 12ì¥ ì¸í„°ë™í‹°ë¸Œ ì•„í‚¤í…ì²˜ ìŠ¬ë¼ì´ë“œ |
| ğŸ”§ [Collision Recovery](https://taesla.github.io/collision_recovery/) | ì¶©ëŒ ë³µêµ¬ ì‹œìŠ¤í…œ ë¬¸ì„œ |
| ğŸ“„ [Web Integration Report](docs/WEB_INTEGRATION_REPORT.md) | ROS2-Web í†µí•© ìƒì„¸ ë¦¬í¬íŠ¸ |

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- ï¿½ï¿½ **ìë™ ë¶„ë¥˜**: ì»¨ë² ì´ì–´ ê°ì§€ â†’ í”½ì—… â†’ í¬ê¸°ë³„ ë¶„ë¥˜ â†’ ì ì¬ (1ì°¨)
- ğŸ“¦ **ìë™ ì ì¬**: ë¶„ë¥˜ ì™„ë£Œ í›„ 2ì°¨ ì ì¬ ìë™ ì‹œì‘ (ì›í…Œì´í¬)
- ğŸŒ **ì›¹ ê¸°ë°˜ ì œì–´**: ë¸Œë¼ìš°ì €ì—ì„œ ë¡œë´‡ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë° ì œì–´
- ğŸ”„ **ì¶©ëŒ ìë™ ë³µêµ¬**: SAFE_STOP ê°ì§€ ì‹œ 6ë‹¨ê³„ ìë™ ë³µêµ¬
- ğŸ”¥ **Firebase ì—°ë™**: ì‘ì—… ìƒíƒœ í´ë¼ìš°ë“œ ë™ê¸°í™”
- ğŸ‘€ **ì‹œìŠ¤í…œ ê°ì‹œ**: ë“œë¼ì´ë²„ í¬ë˜ì‹œ ê°ì§€ ë° ìë™ ì¬ì‹œì‘ (Watcher Node)

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
doosan_rokey_collabo1/
â”œâ”€â”€ start_system.sh                 # â­ ì‹œìŠ¤í…œ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ docs/                           # GitHub Pages ë¬¸ì„œ
â”‚   â”œâ”€â”€ index.html                  # ìŠ¬ë¼ì´ë“œ ë·°ì–´
â”‚   â””â”€â”€ slide01~12.html             # ì•„í‚¤í…ì²˜ ìŠ¬ë¼ì´ë“œ
â”‚
â””â”€â”€ src/                            # ROS2 íŒ¨í‚¤ì§€ë“¤
    â”œâ”€â”€ dsr_integrated/             # ï¿½ï¿½ ë©”ì¸ í†µí•© íŒ¨í‚¤ì§€
    â”‚   â”œâ”€â”€ config/                 # YAML ì„¤ì • (positions, settings)
    â”‚   â”œâ”€â”€ dsr_integrated/         # Python íŒ¨í‚¤ì§€
    â”‚   â”‚   â”œâ”€â”€ nodes/              # ROS2 ë…¸ë“œ (sort_node, server_node)
    â”‚   â”‚   â”œâ”€â”€ core/               # ë¡œë´‡ ì œì–´ ë˜í¼
    â”‚   â”‚   â”œâ”€â”€ tasks/              # ì‘ì—… ëª¨ë“ˆ (pick_place, stacking)
    â”‚   â”‚   â”œâ”€â”€ safety/             # ì¶©ëŒ ë³µêµ¬ ëª¨ë“ˆ
    â”‚   â”‚   â”œâ”€â”€ monitoring/         # ìƒíƒœ ê´€ë¦¬
    â”‚   â”‚   â”œâ”€â”€ integration/        # ì»¨ë² ì´ì–´, Firebase ì—°ë™
    â”‚   â”‚   â””â”€â”€ web/                # Flask + SocketIO ì›¹ì„œë²„
    â”‚   â””â”€â”€ launch/                 # Launch íŒŒì¼
    â”‚
    â”œâ”€â”€ dsr_recovery_watcher/       # ğŸ‘€ ì‹œìŠ¤í…œ ê°ì‹œ & ìë™ ì¬ì‹œì‘
    â”‚   â””â”€â”€ watcher_node.py         # ë“œë¼ì´ë²„ ìƒíƒœ ê°ì‹œ, ë³µêµ¬
    â”‚
    â”œâ”€â”€ arduino_conveyor_bridge/    # ğŸ”Œ ì•„ë‘ì´ë…¸ ì‹œë¦¬ì–¼ ë¸Œë¦¿ì§€
    â”‚   â””â”€â”€ serial_to_topic.py      # Serial â†” ROS2 Topic ë³€í™˜
    â”‚
    â””â”€â”€ logistics_monitor/          # ï¿½ï¿½ ì›¹ í…œí”Œë¦¿ & Firebase í˜¸ìŠ¤íŒ…
        â”œâ”€â”€ templates/              # HTML í…œí”Œë¦¿
        â””â”€â”€ firebase_hosting/       # Firebase ë°°í¬ íŒŒì¼
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

```bash
# Ubuntu 22.04 + ROS2 Humble ì„¤ì¹˜ í•„ìš”
source /opt/ros/humble/setup.bash

# Doosan Robot ë“œë¼ì´ë²„ (ë³„ë„ í´ë¡ )
cd ~/your_ws/src
git clone https://github.com/doosan-robotics/doosan-robot2.git
```

### 2. ë ˆí¬ì§€í† ë¦¬ í´ë¡ 

```bash
cd ~/your_ws/src
git clone https://github.com/taesla/doosan_rokey_collabo1.git
```

### 3. Python ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install flask flask-socketio pyyaml firebase-admin pyserial eventlet
```

### 4. ë¹Œë“œ

```bash
cd ~/your_ws
colcon build --symlink-install
source install/setup.bash
```

### 5. ì‹¤í–‰

**ë°©ë²• 1: ì „ì²´ ì‹œìŠ¤í…œ (ê¶Œì¥)**
```bash
# Watcher Node ì‹¤í–‰ (í„°ë¯¸ë„ 1)
ros2 run dsr_recovery_watcher watcher_node --ros-args -p auto_launch:=true

# â†’ ìë™ìœ¼ë¡œ full_system.launch.py ì‹¤í–‰ë¨
```

**ë°©ë²• 2: ìˆ˜ë™ ì‹¤í–‰**
```bash
# ì‹œìŠ¤í…œ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸ (í„°ë¯¸ë„ 1)
./start_system.sh

# Watcher Node (í„°ë¯¸ë„ 2)
ros2 run dsr_recovery_watcher watcher_node
```

### 6. ì›¹ ì ‘ì†

```
http://localhost:5000
```

---

## âš™ï¸ ì„¤ì • íŒŒì¼

### ë¡œë´‡ ìœ„ì¹˜ (src/dsr_integrated/config/positions.yaml)
```yaml
positions:
  home: [0, 0, 90, 0, 90, 0]
  pick: [335.0, 152.0, 80.0, 23.0, 175.0, 23.0]
  place_small: [420.0, 210.0, 240.0, 8.0, 175.0, 7.0]
  # ...
```

### ë¡œë´‡ ì„¤ì • (src/dsr_integrated/config/settings.yaml)
```yaml
force:
  threshold: 15.0
  push_force: 15.0
  max_descent: 100.0

motion:
  velocity_move: 100
  accel_move: 100
```

---

## ğŸŒ ì›¹ UI ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ | ë¡œë´‡ ìƒíƒœ, ì¡°ì¸íŠ¸ ìœ„ì¹˜, ì‘ì—… ì§„í–‰ë¥  |
| ğŸ® ìˆ˜ë™ ì œì–´ | ë¶„ë¥˜ ì‹œì‘/ì •ì§€, í™ˆ ë³µê·€, ê·¸ë¦¬í¼ ì œì–´ |
| ğŸ”„ ì›í…Œì´í¬ ì‹œë‚˜ë¦¬ì˜¤ | 1ì°¨ ë¶„ë¥˜(6ê°œ) â†’ 2ì°¨ ì ì¬ ìë™ ì—°ë™ |
| âš ï¸ ì¶©ëŒ ë³µêµ¬ | SAFE_STOP ê°ì§€ ì‹œ ìë™/ìˆ˜ë™ ë³µêµ¬ |
| ï¿½ï¿½ í†µê³„ | ë¶„ë¥˜ ì¹´ìš´íŠ¸, ì˜¤ë¥˜ íšŸìˆ˜, ê°€ë™ë¥  |

---

## ğŸ”§ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     System Manager                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              watcher_node (ê°ì‹œ & ì¬ì‹œì‘)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              full_system.launch.py                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ Driver  â”‚ â”‚  Sort   â”‚ â”‚   Web    â”‚ â”‚ Conveyor  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  Node   â”‚ â”‚  Node   â”‚ â”‚  Server  â”‚ â”‚  Bridge   â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚          â”‚           â”‚           â”‚             â”‚            â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                      â–¼           â–¼                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚ Firebase  â”‚  â”‚   Web   â”‚                     â”‚
â”‚              â”‚    DB     â”‚  â”‚ Browser â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë¼ì´ì„¼ìŠ¤

MIT License

---

## ğŸ‘¥ íŒ€

ROKEY í˜‘ë™ë¡œë´‡ 1ì¡°
